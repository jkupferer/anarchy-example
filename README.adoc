# Anarchy Example

Install Anarchy

This step installs the Anarchy custom resource definitions and cluster roles.

--------------------------------------------------------------------------------
oc process -f https://raw.githubusercontent.com/redhat-cop/anarchy/master/install-template.yaml | oc apply -f -
--------------------------------------------------------------------------------

Create an example namespace to work on the example.

------------------------------
oc new-project anarchy-example
------------------------------

Deploy Anarchy to the namespace.

--------------------------------------------------------------------------------
oc process -f https://raw.githubusercontent.com/redhat-cop/anarchy/master/deploy-template.yaml \
| oc apply -f -
--------------------------------------------------------------------------------

Create the example governor.

--------------------------------------------------------------------------------
oc apply -f example-governor.yaml
--------------------------------------------------------------------------------

Grant access to the runner.

--------------------------------------------------------------------------------
oc policy add-role-to-user edit -z anarchy-runner-default
--------------------------------------------------------------------------------

Create an example subject.

--------------------------------------------------------------------------------
oc create -f example-subject.yaml
--------------------------------------------------------------------------------

Watch the anarchy runner logs.

--------------------------------------------------------------------------------
oc logs deployment/anarchy-runner-default -f
--------------------------------------------------------------------------------

Observe that Anarchy creates a configmap in response to the subject creation.

--------------------------------------------------------------------------------
oc get configmap
--------------------------------------------------------------------------------

Delete example subject, not waiting for completion.

--------------------------------------------------------------------------------
oc delete anarchysubject --wait=false
--------------------------------------------------------------------------------

Watch the anarchy runner logs for delete.

--------------------------------------------------------------------------------
oc logs deployment/anarchy-runner-default -f
--------------------------------------------------------------------------------

Confirm that the configmap is now gone.

--------------------------------------------------------------------------------
oc get configmap
--------------------------------------------------------------------------------

And that the AnarchySubject is also gone.

--------------------------------------------------------------------------------
oc get anarchysubject
--------------------------------------------------------------------------------
